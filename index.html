<!doctype html>
<head>
    <title>CFTC Bank Participation Report</title>
</head>
<h1>CFTC Bank Participation Report</h1>
<canvas></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module">

import spoo from './spoo.mjs'
import bpr from './bpr.mjs'

let canvas = document .querySelector ('canvas');
new Chart (canvas, {
    data: {
        datasets: [
            {
                type: 'line',
                label: 'price',
                data: spoo,
                parsing: {
                    xAxisKey: 'date',
                    yAxisKey: 'price',
                },
                yAxisID: 'y_price',
            },
            {
                type: 'bar',
                label: 'volume',
                data: spoo,
                parsing: {
                    xAxisKey: 'date',
                    yAxisKey: 'volume',
                },
                yAxisID: 'y_volume',
                hidden: true,
            },
            {
                type: 'line',
                label: 'delta',
                data: bpr,
                parsing: {
                    xAxisKey: 'date',
                    yAxisKey: 'delta',
                },
                yAxisID: 'y_delta',
                fill: 'origin',
            },
            {
                type: 'bar',
                label: 'oi',
                data: bpr,
                parsing: {
                    xAxisKey: 'date',
                    yAxisKey: 'oi',
                },
                yAxisID: 'y_oi',
                hidden: true,
            },
        ],
    },
    options: {
        scales: {
            x: {
                grid: {
                    display: false,
                }
            },
            y_price: {
                position: 'right',
                grid: {
                    display: false,
                },
            },
            y_volume: {
                position: 'right',
                grace: '90%',
                grid: {
                    display: false,
                },
                display: false,
            },
            y_delta: {
                position: 'left',
                grid: {
                    display: false,
                },
            },
            y_oi: {
                position: 'left',
                reverse: true,
                grace: '90%',
                grid: {
                    display: false,
                },
                display: false,
            },
        },

        pointStyle: false,
        tension: 0.25,
    },
})

</script>
